<html>
<head>
    <title>Arcgis api  4.17 加载平顶山图</title>
    <meta charset="utf-8">


    <link rel="stylesheet" href="http://127.0.0.1:8989/arcgis/4.17/esri/themes/light/main.css">
    <script src="http://127.0.0.1:8989/arcgis/4.17/init.js"></script>


</head>

<body>
<div id="mapDiv" style="width:100%;"></div>
<script>

    require(["esri/Map", "esri/Basemap",
        "esri/layers/GroupLayer",
        "esri/config", "esri/views/MapView",
        "esri/layers/FeatureLayer",
        "esri/layers/GeoJSONLayer",
        "esri/layers/WebTileLayer",
        "esri/layers/support/TileInfo",
        "esri/Graphic",
        "esri/geometry/Extent",
        "esri/geometry/SpatialReference",
        "dojo/dom",
        "dojo/dom-construct"], function (Map, Basemap, GroupLayer, esriConfig, MapView, FeatureLayer, GeoJSONLayer, WebTileLayer, TileInfo, Graphic, Extent, SpatialReference) {

        let tileInfo = new TileInfo({
            dpi: 96,
            rows: 256,
            cols: 256,
            compressionQuality: 0,
            origin: {
                x: -180,
                y: 90
            },
            spatialReference: {
                wkid: 4326
            },
            lods: [
                {level: 0, levelValue: 0, resolution: 0.7031249999990241, scale: 295829355.454155},
                {level: 1, levelValue: 1, resolution: 0.3515625000000313, scale: 147914677.727296},
                {level: 2, levelValue: 2, resolution: 0.17578125000001618, scale: 73957338.8636482},
                {level: 3, levelValue: 3, resolution: 0.08789062500000809, scale: 36978669.4318241},
                {level: 4, levelValue: 4, resolution: 0.043945312500003914, scale: 18489334.715912},
                {level: 5, levelValue: 5, resolution: 0.021972656249969493, scale: 9244667.357942339},
                {level: 6, levelValue: 6, resolution: 0.010986328124999981, scale: 4622333.678977581},
                {level: 7, levelValue: 7, resolution: 0.0054931640624999905, scale: 2311166.8394887904},
                {level: 8, levelValue: 8, resolution: 0.002746582031250007, scale: 1155583.4197443998},
                {level: 9, levelValue: 9, resolution: 0.0013732910156249987, scale: 577791.709872198},
                {level: 10, levelValue: 10, resolution: 0.0006866455078124993, scale: 288895.854936099},
                {level: 11, levelValue: 11, resolution: 0.00034332275390625087, scale: 144447.92746804998},
                {level: 12, levelValue: 12, resolution: 0.00017166137695312497, scale: 72223.9637340248},
                {level: 13, levelValue: 13, resolution: 0.00008583068847656249, scale: 36111.9818670124},
                {level: 14, levelValue: 14, resolution: 0.00004291534423828124, scale: 18055.9909335062},
                {level: 15, levelValue: 15, resolution: 0.00002145767211914062, scale: 9027.9954667531},
                {level: 16, levelValue: 16, resolution: 0.00001072883605957031, scale: 4513.99773337655},
                {level: 17, levelValue: 17, resolution: 0.000005364418029785168, scale: 2256.99886668828},
                {level: 18, levelValue: 18, resolution: 0.000002682209014892584, scale: 1128.49943334414},
                {level: 19, levelValue: 19, resolution: 0.000001341104507446292, scale: 564.24971667207},
            ]
        });


        let layer = new WebTileLayer({
            id: 'baseMap',
            urlTemplate: 'http://222.85.34.130:8081/geoesb/proxy/ff56b1eac03047d193db62fd16db9caa/072a3bd4b19c459288df5a672f02f32e?service=WMTS&request=GetTile&version=1.0.0&style=default&tilematrixSet=CustomCRS4326ScalePDS_DLG_2019&format=image%2Fpng&width=256&height=256&layer=PDS_DLG_2019&tilematrix={level}&tilerow={row}&tilecol={col}',
            spatialReference: {wkid: 4326},
            fullExtent: {
                xmin: -180,
                ymin: -90,
                xmax: 180,
                ymax: 90,
                spatialReference: 4326
            },
            tileInfo: tileInfo
        })


        var basemap = new Basemap({
            baseLayers: [layer]
        });

        let map = new Map({
            basemap: basemap
        })

        let mapView = new MapView({
            map: map,
            container: 'mapDiv',
            center: [113.188904, 33.766816],
            zoom: 6,
            spatialReference: new SpatialReference(4326)
        });

    });
</script>
</body>

</html>
